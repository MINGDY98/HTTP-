#### 이번 장의 목적

- 메세지의 흐름
- HTTP 메시지의 세 부분
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능(메서드)들
- 응답 메시지가 반환하는 여러 상태 코드들
- 여러 HTTP 헤더들이 하는 일

### 메서지의 흐름
※프락시 :

- 웹 보안, 애플리케이션 통합, 성능 최적화를 위한 중요한 구성요소인 프락시 서버
- 클라이언트의 모든 HTTP 요청을 받아 수정을 거쳐 서버에 전달
- 보안을 위해 사용 - 모든 웹 트래픽 흐름 속에서 신뢰할 만한 중개자 역할. 즉 요청과 응답 필터링
- 애플리케이션 받을때 바이러스 검출 혹은 학생들에게 성인 콘텐츠 차단

메세지는 클라이언트, 서버, 프락시 사이를 흐름
메세지의 방향을 의미하는 용어 '언바운드', '아웃바운드', '업스트림', '다운 스트림' 존재

트랜잭션 방향에 따라 인바운드, 아웃바운드
- 인바운드 : 메시지가 원 서버로 향하는 것
- 아웃바운드 : 모든 처리 후에 사용자 에이전트로 돌아오는 것

요청메시지냐 응답 메시지냐에 관계 없이 모든 메시지는 다운스트림으로 흐름


### 메시지 구성요소/문법

- 시작줄, 헤더, 본문으로 이루어짐
  - 시작줄, 헤더 각 내용은 줄바꿈 문자열로 각 줄이 끝남 'CRLF'
  - 본문은 선택 : empty/text/binary data
  - 헤더는 본문의 정보를 제공 Content-type:본문이 무엇인지, Cotent-length: 본문의 크기

#### 요청메시지

```
<메서드> <요청 URL> <버전>
<헤더>

<엔터티 본문>
```
ex)
GET /specials/saw-blade.gif HTTP/1.0
Host: www.joes-hardware.com


#### 응답메시지

```
<버전> <상태 코드> <사유 구절>
<헤더>

<엔터티 본문>
```
ex)
HTTP/1.0 200 OK
Content-Type: image/gif
Content-length: 8572


*HTTP/1.0 이전 시절에는 응답에 요청줄/응답줄(시작줄)이 들어있을 필요가 없었다.

*HTTP/0.9는 요청은 메서드와 요청 URL만 있고, 응답은 오직 엔터티만 되어있어서 대부분의 기능들을 구현할수없다.

|구분|설명|
|---|---|
|메서드|클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작. 모든 서버가 모든 메서드를 구현하지 않으며 서버별로 쓰는 메서드가 있을수있다.![image](https://user-images.githubusercontent.com/38098157/187026818-a057979e-7e72-4deb-9f49-937ce6e8e99a.png)|
|요청URL|요청 대상의 리소스를 지칭|
|버전|사용중인 HTTP버전 HTTP 애플리케이션들이 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단 버전 번호는 어떤 애플리케이션이 지원하는 가장 높은 HTTP 버전을 가리키는 것이기에 그 버전까지 이해할 수 있음을 의미하는 것 버전 번호는 분수가 아니라 각각 분리된다 ex HTTP/1.0은 1과 0이 분리되어서 HTTP/2.22가 HTTP/2.3보다 크다.|
|상태코드|요청 중에 무엇이 일어났는지 (트랜잭션을) 설명하는 숫자(첫번째자리-'성공','에러등 분류) ![image](https://user-images.githubusercontent.com/38098157/187027009-45400d83-64ab-42d8-b42f-bf7228e05484.png) ![image](https://user-images.githubusercontent.com/38098157/187027013-68ab1491-4b35-4f51-9152-3d8b00176b3a.png) 만약 정의된 범위에 없는 상태코드를 받게되더라도, 전체 범위의 분류를 고려하는 것이 좋다.|
|사유구절|상태 코드의 의미를 사람이 이해하도록 설명 상태 코드와 일대일로 대응되며, 상태 코드에 대한 글로된 설명 제공, HTTP 명세는 사유 구절에 대한 엄격한 규칙을 제공하지 않음|
|헤더|0개/1개/여러개 HTTP 헤더 존재 애플리케이션은 자유롭게 자신의 헤더를 만들 수 있음 이름, 콜론(:) 값, 공백(선택), CRLF가 한 세트 * 헤더의 집합은 항상 빈 줄 CRLF로 끝나야함 ![image](https://user-images.githubusercontent.com/38098157/187027029-bfa75984-f498-4d7f-8498-5b147fa193f8.png)|

